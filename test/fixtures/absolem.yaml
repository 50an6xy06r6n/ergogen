points:
  zones:
    matrix:
      anchor:
        rotate: 5
      columns:
        pinky:
          rotate: -5
          origin: [7, -7]
          rows:
            bottom:
            home:
              bind: [,15,-1]
            top:
              bind: [,15,-1]
          key:
            column_net: P1
        ring:
          stagger: 12
          rows:
            bottom:
              bind: [,,,10]
            home:
              bind: [,10]
            top:
              bind: [,10]
          key:
            column_net: P0
        middle:
          stagger: 5
          rows:
            bottom:
              bind: [,10,,10]
            home:
              bind: [,10,,10]
            top:
          key:
            column_net: P2
        index:
          stagger: -6
          rows:
            bottom:
              bind: [,10]
            home:
              bind: [,,,10]
            top:
              bind: [,,,10]
          key:
            column_net: P3
        inner:
          stagger: -2
          rows:
            bottom:
              bind: [,,10,]
            home:
              bind: [,,,10]
            top:
              bind: [,,,10]
          key:
            column_net: P4
      rows:
        bottom:
          bind: [10]
          row_net: P16
          mirror:
            row_net: P7
        home:
          bind: [10]
          row_net: P14
          mirror:
            row_net: P6
        top:
          footprints:
            mx:
              anchor:
                rotate: 180
          row_net: P15
          mirror:
            row_net: P5
      key:
        tags:
          s19: true
    choc:
      extends: matrix
      columns:
        pinky:
          stagger: 1
          origin: [7, -8]
      key:
        padding: 18
        tags:
          s19: false
          s18: true
        footprints:
          diode: '!!unset'
    thumbfan:
      anchor:
        ref: matrix_inner_bottom
        shift: [-7, -19]
      columns:
        near:
          spread: 21.25
          rotate: -28
          origin: [9.5, -9]
          rows:
            thumb:
              bind: [10,5,,]
          key:
            column_net: P2
            tags:
              classic: true
        home:
          spread: 21.25
          rotate: -28
          origin: [11.75, -9]
          rows:
            thumb:
              bind: [,10,,15]
          key:
            column_net: P3
            tags:
              classic: true
              uniform: true
        far:
          rows:
            thumb:
              bind: [-1,,,5]
          key:
            column_net: P4
            tags:
              classic: true
      rows:
        thumb:
          row_net: P10
          mirror:
            row_net: P8
    unifar:
      anchor:
        ref: thumbfan_home_thumb
      columns:
        home_again:
          rotate: -28
          origin: [9.5, -9]
          key:
            skip: true
        far1u:
          rows:
            thumb:
              bind: [-1,,,5]
          key:
            column_net: P4
            footprints:
              diode: false
            tags:
              uniform: true
      rows:
        thumb:
          row_net: P10
          mirror:
            row_net: P8
    uninear:
      anchor:
        ref: thumbfan_home_thumb
      columns:
        home_again:
          spread: -19
          rotate: 28
          origin: [-9.5, -9]
          key:
            skip: true
        near1u:
          rows:
            thumb:
              bind: [10,5,,]
          key:
            column_net: P2
            footprints:
              diode: false
            tags:
              uniform: true
      rows:
        thumb:
          row_net: P10
          mirror:
            row_net: P8
  key:
    bind: [0,0,0,0]
    footprints:
      mx:
        type: mx
        nets:
          from: '!column_net'
          to: '!colrow'
      diode:
        type: diode
        anchor:
          rotate: 90
          shift: [8, 0]
        nets:
          from: '!name'
          to: '!row_net'
    mirror:
      footprints:
        mx:
          nets:
            from: '!colrow'
            to: '!column_net'
  rotate: -20
  mirror:
    ref: matrix_pinky_home
    distance: 223.7529778
outlines:
  glue:
    classic_s19:
      top:
        left:
          ref: matrix_inner_top
          shift: [, 0.5]
        right:
          ref: mirror_matrix_inner_top
          shift: [, 0.5]
      bottom:
        left:
          ref: thumbfan_far_thumb
          shift: [0.5, 0]
          rotate: 90
        right:
          ref: mirror_thumbfan_far_thumb
          shift: [0.5, 0]
          rotate: 90
      waypoints:
        - percent: 50
          width: 50
        - percent: 90
          width: 25
    uniform_s19:
      extends: classic_s19
      bottom:
        left:
          ref: unifar_far1u_thumb
        right:
          ref: mirror_unifar_far1u_thumb
    classic_s18:
      extends: classic_s19
      top:
        left:
          ref: choc_inner_top
        right:
          ref: mirror_choc_inner_top
    uniform_s18:
      extends:
        - uniform_s19
        - classic_s18
  exports:
    classic_s19_outline:
      main:
        type: keys
        side: both
        tags:
          - s19
          - classic
        glue: classic_s19
        size: 13.5
        corner: .5
    uniform_s19_outline:
      extends: classic_s19_outline
      main:
        tags:
          - s19
          - uniform
        glue: uniform_s19
    uniform_s18_outline:
      extends: uniform_s19_outline
      main:
        tags:
          - s18
          - uniform
        glue: uniform_s18
    intersected_outline:
      one:
        type: outline
        name: classic_s19_outline
      two:
        type: outline
        name: uniform_s18_outline
        operation: intersect
    classic_s19_switches:
      main:
        type: keys
        side: both
        tags:
          - classic
        glue: classic_s19
        size: 14
        bound: false
    uniform_s19_switches:
      main:
        type: keys
        side: both
        tags:
          - uniform
        glue: uniform_s19
        size: 14
        bound: false
    classic_s19_middle:
      raw:
        type: keys
        side: middle
        tags:
          - s19
          - classic
        glue: classic_s19
        size: 24
      helper1:
        type: rectangle
        size: [25, 5]
        ref: thumbfan_home_thumb
        shift: [0, 12]
      helper2:
        type: rectangle
        size: [25, 5]
        ref: thumbfan_far_thumb
        shift: [-25, 12]
      helper3:
        type: rectangle
        size: [25, 5]
        ref: mirror_thumbfan_home_thumb
        shift: [25, 12]
      helper4:
        type: rectangle
        size: [25, 5]
        ref: mirror_thumbfan_far_thumb
        shift: [0, 12]
      outer_bounds:
        type: outline
        name: classic_s19_outline
        operation: intersect
pcbs:
  main:
    edge: intersected_outline
    footprints:
      mcu:
        type: promicro
        anchor:
          ref:
            - choc_inner_top
            - mirror_choc_inner_top
          shift: [0, -20]
          rotate: 270
